
[include mainsail.cfg]
[include macros.cfg]
[exclude_object]
[include KAMP_Settings.cfg]
[include Adaptive_Meshing.cfg]
#[include timelapse.cfg]
[include stealthburner_leds.cfg]
[include Demon_BTT_Eddy_Offset.cfg]

[temperature_sensor mcu_temp]
sensor_type: temperature_mcu
sensor_mcu: mcu
min_temp: 0
max_temp: 100

[temperature_sensor raspberry_pi_4b]
sensor_type: temperature_host
min_temp: 10
max_temp: 100

[mcu EBBCan]
serial: /dev/ttyACM2

[mcu]
serial: /dev/ttyACM1

[adxl345]
cs_pin: EBBCan: PB12
spi_software_sclk_pin: EBBCan: PB10
spi_software_mosi_pin: EBBCan: PB11
spi_software_miso_pin: EBBCan: PB2
axes_map: x,y,z

[resonance_tester]
accel_chip: adxl345
probe_points:
    109,102,20  # an example for a 350mm printer

[stepper_x]
step_pin: gpio11
dir_pin: !gpio10
enable_pin: !gpio12
microsteps: 16
rotation_distance: 40
endstop_pin: ^gpio4
endstop_pin: tmc2209_stepper_x:virtual_endstop
homing_retract_dist: 0
position_endstop: 0
position_max: 230
homing_speed: 20

[tmc2209 stepper_x]
uart_pin: gpio9
tx_pin: gpio8
uart_address: 0
run_current: 1.2
hold_current: 0.6
stealthchop_threshold: 999999
diag_pin: ^gpio4
driver_SGTHRS: 45

[stepper_y]
step_pin: gpio6
dir_pin: gpio5
enable_pin: !gpio7
microsteps: 16
rotation_distance: 40
endstop_pin: ^gpio3
endstop_pin: tmc2209_stepper_y:virtual_endstop
homing_retract_dist: 0
position_endstop: 0
position_max: 230
homing_speed: 20

[tmc2209 stepper_y]
uart_pin: gpio9
tx_pin: gpio8
uart_address: 2
run_current: 1.2
hold_current: 0.6
stealthchop_threshold: 999999
diag_pin: ^gpio3
driver_SGTHRS:47

[stepper_z]
step_pin: gpio19
dir_pin: !gpio28
enable_pin: !gpio2
microsteps: 16
rotation_distance: 8
endstop_pin: ^gpio25
#position_endstop: 0
endstop_pin: probe:z_virtual_endstop
position_min: -10
position_max: 300
homing_speed: 20

[tmc2209 stepper_z]
uart_pin: gpio9
tx_pin: gpio8
uart_address: 1
run_current: 0.650
hold_current: 0.500
#stealthchop_threshold: 999999

[stepper_z1]
step_pin: gpio14
dir_pin: !gpio13
enable_pin: !gpio15
microsteps: 16
rotation_distance: 8

[extruder]
step_pin: EBBCan: PD0
dir_pin: !EBBCan: PD1
enable_pin: !EBBCan: PD2
microsteps: 16
rotation_distance: 4.48448
nozzle_diameter: 0.400
filament_diameter: 1.750
heater_pin: EBBCan: PB13
sensor_type: EPCOS 100K B57560G104F
sensor_pin: EBBCan: PA3
#control: pid
#pid_Kp: 21.527
#pid_Ki: 1.063
#pid_Kd: 108.982
min_temp: 0
max_temp: 280
pressure_advance: 0.02

[tmc2209 extruder]
uart_pin: EBBCan: PA15
run_current: 0.650
stealthchop_threshold: 999999

[filament_switch_sensor runout_sensor]
switch_pin: ^gpio16
pause_on_runout: True

# [filament_motion_sensor smart_sensor]
# switch_pin: ^gpio16
# detection_length: 2.5

[heater_bed]
heater_pin: gpio21
sensor_type: EPCOS 100K B57560G104F
sensor_pin: gpio26
#control: pid
#pid_Kp: 54.027
#pid_Ki: 0.770
#pid_Kd: 948.182
min_temp: 0
max_temp: 130

[fan]
pin: EBBCan: PA1

[heater_fan hotend_fan]
pin: EBBCan: PA0
heater: extruder
heater_temp: 50.0

[printer]
kinematics: corexy
max_velocity: 500
max_accel: 6000
max_z_velocity: 25
max_z_accel: 30

[input_shaper]
shaper_freq_x: 68.8
shaper_type_x: mzv
shaper_freq_y: 53.8
shaper_type_y: zv

#[bltouch]
#sensor_pin: ^EBBCan:PB8
#control_pin: EBBCan:PB9
#x_offset: 32.95
#y_offset: -10.71
#z_offset: 0
#probe_with_touch_mode: true
#stow_on_each_sample: false
#sample_retract_dist:20

#[neopixel board_rgb]
#pin: 
#chain_count: 1
#color_order: GRB
#initial_RED: 0.3
#initial_GREEN: 0.3
#initial_BLUE: 0.3

#[bed_mesh]
#speed: 120
#mesh_min: 10, 10
#mesh_max: 200, 194
#probe_count: 4,4
#algorithm: bicubic

#[safe_z_home]
#home_xy_position: 109, 102
#speed: 75
#z_hop: 10
#z_hop_speed: 5

[z_tilt]
horizontal_move_z: 10
retries: 5
retry_tolerance: 0.02
speed: 150
z_positions: 0, 122
            195, 122
points: 7, 76
        220, 76

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 33.730
#*# pid_ki = 16.062
#*# pid_kd = 17.709
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 67.911
#*# pid_ki = 1.115
#*# pid_kd = 1033.946
#*#
#*# [probe_eddy_current btt_eddy]
#*# reg_drive_current = 15
#*# calibrate =
#*# 	0.050000:3278416.921,0.090000:3276819.935,0.130000:3275264.151,
#*# 	0.170000:3273685.480,0.210000:3272231.465,0.250000:3270758.525,
#*# 	0.290000:3269354.081,0.330000:3267881.535,0.370000:3266549.583,
#*# 	0.410000:3265177.943,0.450000:3263863.678,0.490000:3262524.762,
#*# 	0.530000:3261270.765,0.570000:3259996.458,0.610000:3258843.947,
#*# 	0.650000:3257600.280,0.690000:3256466.392,0.730000:3255241.614,
#*# 	0.770000:3254158.804,0.810000:3253007.267,0.850000:3251964.042,
#*# 	0.890000:3250862.040,0.930000:3249839.924,0.970000:3248774.123,
#*# 	1.010000:3247806.891,1.050000:3246812.973,1.090000:3245858.395,
#*# 	1.130000:3244876.828,1.170000:3243983.574,1.210000:3243041.756,
#*# 	1.250000:3242152.022,1.290000:3241276.002,1.330000:3240419.934,
#*# 	1.370000:3239596.197,1.410000:3238815.934,1.450000:3237970.752,
#*# 	1.490000:3237183.912,1.530000:3236390.562,1.570000:3235656.198,
#*# 	1.610000:3234855.519,1.650000:3234161.679,1.690000:3233431.867,
#*# 	1.730000:3232737.342,1.770000:3232008.692,1.810000:3231364.439,
#*# 	1.850000:3230700.531,1.890000:3230066.799,1.930000:3229407.721,
#*# 	1.970000:3228782.991,2.010000:3228133.988,2.050000:3227558.997,
#*# 	2.090000:3226952.132,2.130000:3226404.560,2.170000:3225825.684,
#*# 	2.210000:3225253.308,2.250000:3224702.786,2.290000:3224194.644,
#*# 	2.330000:3223656.379,2.370000:3223132.056,2.410000:3222630.903,
#*# 	2.450000:3222169.513,2.490000:3221636.886,2.530000:3221188.472,
#*# 	2.570000:3220694.250,2.610000:3220262.192,2.650000:3219791.833,
#*# 	2.690000:3219333.018,2.730000:3218902.988,2.770000:3218490.726,
#*# 	2.810000:3218049.869,2.850000:3217674.737,2.890000:3217262.973,
#*# 	2.930000:3216870.930,2.970000:3216479.228,3.010000:3216113.308,
#*# 	3.050000:3215731.908,3.090000:3215355.531,3.130000:3215011.293,
#*# 	3.170000:3214658.806,3.210000:3214301.534,3.250000:3213967.187,
#*# 	3.290000:3213648.842,3.330000:3213316.691,3.370000:3212990.444,
#*# 	3.410000:3212695.634,3.450000:3212377.284,3.490000:3212077.796,
#*# 	3.530000:3211774.651,3.570000:3211486.354,3.610000:3211191.024,
#*# 	3.650000:3210935.295,3.690000:3210631.658,3.730000:3210370.229,
#*# 	3.770000:3210075.548,3.810000:3209846.132,3.850000:3209557.979,
#*# 	3.890000:3209324.449,3.930000:3209065.844,3.970000:3208817.536,
#*# 	4.010000:3208559.596,4.050000:3208316.937
#*#
#*# [temperature_probe btt_eddy]
#*# calibration_temp = 38.654049
#*# drift_calibration =
#*# 	3362024.918955, -3359.968337, 31.633767
#*# 	3320894.353215, -2404.336019, 22.399250
#*# 	3286581.220608, -1571.833946, 14.445337
#*# 	3262554.798981, -1037.105429, 9.396475
#*# 	3244917.060457, -667.837709, 5.946990
#*# 	3230816.226602, -363.396072, 3.031935
#*# 	3219290.327179, -107.562489, 0.602542
#*# 	3210665.065236, 75.182730, -1.141124
#*# 	3204727.647823, 179.789826, -2.113889
#*# drift_calibration_min_temp = 38.448888421582495
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.059455, -0.054636, -0.060336, -0.053001, -0.046374, -0.034631, -0.033351, -0.035026, -0.039692, -0.051424, -0.053411, -0.056068, -0.055230, -0.062937, -0.072738, -0.083351, -0.094159, -0.107860, -0.115524, -0.131392, -0.151346, -0.170117, -0.192800, -0.218955, -0.279643
#*# 	  -0.041693, -0.044811, -0.052521, -0.044529, -0.033856, -0.025205, -0.019887, -0.019973, -0.023972, -0.028252, -0.032731, -0.034410, -0.031290, -0.040713, -0.053979, -0.062158, -0.068480, -0.080823, -0.086674, -0.098859, -0.117962, -0.140524, -0.157966, -0.191041, -0.246458
#*# 	  -0.031229, -0.040252, -0.035398, -0.030410, -0.013836, -0.003184, 0.000373, -0.001738, -0.005207, -0.015485, -0.016542, -0.014692, -0.014129, -0.026695, -0.035130, -0.045310, -0.048027, -0.063120, -0.070837, -0.079197, -0.093022, -0.117197, -0.139711, -0.157601, -0.212299
#*# 	  -0.020125, -0.029893, -0.028269, -0.018057, -0.006315, 0.005933, 0.013125, 0.008765, 0.004908, -0.001139, -0.001790, 0.000607, -0.007147, -0.011852, -0.017193, -0.020474, -0.027146, -0.040613, -0.041835, -0.052786, -0.062758, -0.084676, -0.105166, -0.132289, -0.179926
#*# 	  -0.011113, -0.010689, -0.003167, 0.006596, 0.020827, 0.031056, 0.036715, 0.027114, 0.025407, 0.025723, 0.018657, 0.016183, 0.016941, 0.009213, 0.008839, 0.001328, -0.008958, -0.013759, -0.020449, -0.018394, -0.035267, -0.060468, -0.075202, -0.101826, -0.146842
#*# 	  -0.001972, -0.000332, 0.006604, 0.014921, 0.028556, 0.039732, 0.045950, 0.039474, 0.036512, 0.027436, 0.026710, 0.020958, 0.026959, 0.031243, 0.025340, 0.020460, 0.009886, 0.004405, 0.001763, 0.001321, -0.007125, -0.030858, -0.047007, -0.067874, -0.117715
#*# 	  0.016520, 0.024861, 0.020368, 0.037655, 0.050677, 0.060634, 0.063256, 0.058187, 0.051299, 0.043892, 0.047935, 0.046829, 0.047499, 0.047347, 0.041966, 0.036494, 0.033694, 0.026197, 0.023120, 0.018457, 0.009865, -0.008305, -0.019108, -0.049624, -0.094587
#*# 	  0.030867, 0.041535, 0.043374, 0.052603, 0.062917, 0.076340, 0.083475, 0.079210, 0.071905, 0.060629, 0.058924, 0.063839, 0.068436, 0.070790, 0.068306, 0.063067, 0.058411, 0.052121, 0.045012, 0.040157, 0.034553, 0.017491, 0.004788, -0.023857, -0.069379
#*# 	  0.039464, 0.052528, 0.056688, 0.072756, 0.079303, 0.093510, 0.099167, 0.090640, 0.086427, 0.081036, 0.081752, 0.081733, 0.086305, 0.085790, 0.084747, 0.082038, 0.076876, 0.067967, 0.065733, 0.061971, 0.052470, 0.033512, 0.016557, -0.004116, -0.042238
#*# 	  0.046987, 0.055973, 0.062996, 0.076690, 0.081407, 0.100995, 0.107896, 0.104430, 0.099646, 0.092622, 0.089920, 0.094835, 0.096996, 0.099446, 0.102758, 0.100685, 0.096072, 0.089246, 0.088311, 0.080163, 0.070473, 0.053269, 0.034382, 0.018299, -0.022684
#*# 	  0.052348, 0.070659, 0.070281, 0.085390, 0.100217, 0.112390, 0.121506, 0.116859, 0.108928, 0.105014, 0.106688, 0.105466, 0.112171, 0.116539, 0.118789, 0.119581, 0.110178, 0.105771, 0.101233, 0.099236, 0.085803, 0.073556, 0.054323, 0.039832, 0.007805
#*# 	  0.057672, 0.070653, 0.081378, 0.094695, 0.106015, 0.124501, 0.129314, 0.125334, 0.120424, 0.119313, 0.118505, 0.124811, 0.124015, 0.125954, 0.133910, 0.131391, 0.128010, 0.121805, 0.123163, 0.120783, 0.106422, 0.089250, 0.071534, 0.057639, 0.018345
#*# 	  0.051348, 0.079374, 0.080870, 0.099156, 0.116986, 0.132315, 0.140111, 0.133228, 0.128304, 0.124445, 0.129113, 0.130587, 0.141137, 0.138876, 0.143937, 0.139991, 0.137794, 0.135140, 0.136491, 0.133445, 0.122383, 0.109324, 0.091153, 0.072206, 0.041738
#*# 	  0.055330, 0.073756, 0.086320, 0.102187, 0.120435, 0.132598, 0.140235, 0.140816, 0.136149, 0.135434, 0.131289, 0.140452, 0.145655, 0.145333, 0.146757, 0.146482, 0.147536, 0.146405, 0.149173, 0.144417, 0.135782, 0.124065, 0.104471, 0.094765, 0.049671
#*# 	  0.060598, 0.087558, 0.093151, 0.110748, 0.131650, 0.137218, 0.152501, 0.149489, 0.148030, 0.143199, 0.149218, 0.154300, 0.157958, 0.160060, 0.158929, 0.152521, 0.153944, 0.154558, 0.154189, 0.154253, 0.149934, 0.136355, 0.123797, 0.106660, 0.077143
#*# 	  0.060585, 0.086768, 0.093742, 0.113704, 0.130566, 0.143164, 0.150158, 0.147339, 0.145351, 0.147018, 0.149331, 0.154562, 0.162255, 0.158976, 0.160956, 0.156318, 0.160087, 0.158237, 0.161515, 0.161638, 0.156441, 0.151499, 0.135018, 0.125312, 0.079773
#*# 	  0.051526, 0.087185, 0.091905, 0.110980, 0.129539, 0.139694, 0.149102, 0.155614, 0.147011, 0.148242, 0.150593, 0.158115, 0.163183, 0.161885, 0.165534, 0.163552, 0.161207, 0.164546, 0.165303, 0.168331, 0.169913, 0.158548, 0.147626, 0.134293, 0.108422
#*# 	  0.063975, 0.087596, 0.098317, 0.116038, 0.131688, 0.145468, 0.150167, 0.153079, 0.152352, 0.151861, 0.153159, 0.160556, 0.167297, 0.167116, 0.170006, 0.170748, 0.169002, 0.169391, 0.172174, 0.171426, 0.173775, 0.165988, 0.151244, 0.145933, 0.099425
#*# 	  0.059047, 0.100250, 0.098105, 0.117770, 0.132377, 0.140284, 0.146105, 0.155288, 0.155169, 0.155819, 0.159249, 0.167648, 0.167813, 0.169299, 0.170720, 0.167873, 0.166192, 0.172503, 0.174858, 0.178695, 0.179004, 0.172075, 0.166170, 0.152869, 0.132680
#*# 	  0.070281, 0.087810, 0.099835, 0.117008, 0.126758, 0.146329, 0.151116, 0.154335, 0.156359, 0.156053, 0.157521, 0.164303, 0.176739, 0.174263, 0.173413, 0.171443, 0.174952, 0.176394, 0.181567, 0.185467, 0.183548, 0.177085, 0.164897, 0.164401, 0.131419
#*# 	  0.067501, 0.098148, 0.102672, 0.121260, 0.133118, 0.145828, 0.160796, 0.157275, 0.158385, 0.160549, 0.163267, 0.168035, 0.175089, 0.176978, 0.177306, 0.174271, 0.180235, 0.181117, 0.184816, 0.190426, 0.186895, 0.182625, 0.178170, 0.174652, 0.155564
#*# 	  0.070868, 0.087392, 0.094513, 0.110493, 0.127931, 0.144985, 0.155221, 0.156584, 0.158438, 0.160850, 0.162272, 0.167409, 0.173658, 0.175130, 0.176055, 0.179830, 0.176986, 0.179740, 0.177916, 0.189646, 0.188324, 0.191123, 0.175267, 0.188110, 0.144114
#*# 	  0.041669, 0.080390, 0.081385, 0.098846, 0.112790, 0.134573, 0.145940, 0.148324, 0.151617, 0.151821, 0.159002, 0.161262, 0.166587, 0.172094, 0.174753, 0.174750, 0.173573, 0.180937, 0.181502, 0.186823, 0.190950, 0.192641, 0.193087, 0.188942, 0.176823
#*# 	  0.031652, 0.050624, 0.060761, 0.080177, 0.099639, 0.119029, 0.132870, 0.138090, 0.144261, 0.143843, 0.150138, 0.153304, 0.164112, 0.164296, 0.164668, 0.167671, 0.166908, 0.170612, 0.175028, 0.187039, 0.190279, 0.194871, 0.188612, 0.200064, 0.170779
#*# 	  0.013137, 0.056492, 0.050343, 0.073131, 0.091409, 0.111763, 0.128428, 0.136416, 0.143678, 0.145420, 0.147757, 0.152170, 0.163350, 0.169973, 0.165793, 0.166999, 0.167574, 0.176399, 0.179569, 0.189843, 0.195282, 0.207119, 0.205733, 0.207642, 0.202983
#*# x_count = 25
#*# y_count = 25
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 10.0
#*# max_x = 220.0
#*# min_y = 30.0
#*# max_y = 180.95999999999998
