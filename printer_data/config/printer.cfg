
[include mainsail.cfg]
[include macros.cfg]
[exclude_object]
[include KAMP_Settings.cfg]
[include Adaptive_Meshing.cfg]
#[include timelapse.cfg]
[include stealthburner_leds.cfg]
[include Demon_BTT_Eddy_Offset.cfg]

[temperature_sensor mcu_temp]
sensor_type: temperature_mcu
sensor_mcu: mcu
min_temp: 0
max_temp: 100

[temperature_sensor raspberry_pi_4b]
sensor_type: temperature_host
min_temp: 10
max_temp: 100

[mcu EBBCan]
serial: /dev/ttyACM2

[mcu]
serial: /dev/ttyACM1

[adxl345]
cs_pin: EBBCan: PB12
spi_software_sclk_pin: EBBCan: PB10
spi_software_mosi_pin: EBBCan: PB11
spi_software_miso_pin: EBBCan: PB2
axes_map: x,y,z

[resonance_tester]
accel_chip: adxl345
probe_points:
    109,102,20  # an example for a 350mm printer

[stepper_x]
step_pin: gpio11
dir_pin: !gpio10
enable_pin: !gpio12
microsteps: 16
rotation_distance: 40
endstop_pin: ^gpio4
endstop_pin: tmc2209_stepper_x:virtual_endstop
homing_retract_dist: 0
position_endstop: 0
position_max: 230
homing_speed: 20

[tmc2209 stepper_x]
uart_pin: gpio9
tx_pin: gpio8
uart_address: 0
run_current: 1.2
hold_current: 0.6
stealthchop_threshold: 999999
diag_pin: ^gpio4
driver_SGTHRS: 45

[stepper_y]
step_pin: gpio6
dir_pin: gpio5
enable_pin: !gpio7
microsteps: 16
rotation_distance: 40
endstop_pin: ^gpio3
endstop_pin: tmc2209_stepper_y:virtual_endstop
homing_retract_dist: 0
position_endstop: 0
position_max: 230
homing_speed: 20

[tmc2209 stepper_y]
uart_pin: gpio9
tx_pin: gpio8
uart_address: 2
run_current: 1.2
hold_current: 0.6
stealthchop_threshold: 999999
diag_pin: ^gpio3
driver_SGTHRS:47

[stepper_z]
step_pin: gpio19
dir_pin: !gpio28
enable_pin: !gpio2
microsteps: 16
rotation_distance: 8
endstop_pin: ^gpio25
#position_endstop: 0
endstop_pin: probe:z_virtual_endstop
position_min: -10
position_max: 300
homing_speed: 20

[tmc2209 stepper_z]
uart_pin: gpio9
tx_pin: gpio8
uart_address: 1
run_current: 0.650
hold_current: 0.500
#stealthchop_threshold: 999999

[stepper_z1]
step_pin: gpio14
dir_pin: !gpio13
enable_pin: !gpio15
microsteps: 16
rotation_distance: 8

[extruder]
step_pin: EBBCan: PD0
dir_pin: !EBBCan: PD1
enable_pin: !EBBCan: PD2
microsteps: 16
rotation_distance: 4.48448
nozzle_diameter: 0.400
filament_diameter: 1.750
heater_pin: EBBCan: PB13
sensor_type: EPCOS 100K B57560G104F
sensor_pin: EBBCan: PA3
#control: pid
#pid_Kp: 21.527
#pid_Ki: 1.063
#pid_Kd: 108.982
min_temp: 0
max_temp: 280
pressure_advance: 0.02

[tmc2209 extruder]
uart_pin: EBBCan: PA15
run_current: 0.650
stealthchop_threshold: 999999

[filament_switch_sensor runout_sensor]
switch_pin: ^gpio16
pause_on_runout: True

# [filament_motion_sensor smart_sensor]
# switch_pin: ^gpio16
# detection_length: 2.5

[heater_bed]
heater_pin: gpio21
sensor_type: EPCOS 100K B57560G104F
sensor_pin: gpio26
#control: pid
#pid_Kp: 54.027
#pid_Ki: 0.770
#pid_Kd: 948.182
min_temp: 0
max_temp: 130

[fan]
pin: EBBCan: PA1

[heater_fan hotend_fan]
pin: EBBCan: PA0
heater: extruder
heater_temp: 50.0

[printer]
kinematics: corexy
max_velocity: 500
max_accel: 6000
max_z_velocity: 25
max_z_accel: 30

[input_shaper]
shaper_freq_x: 68.8
shaper_type_x: mzv
shaper_freq_y: 53.8
shaper_type_y: zv

#[bltouch]
#sensor_pin: ^EBBCan:PB8
#control_pin: EBBCan:PB9
#x_offset: 32.95
#y_offset: -10.71
#z_offset: 0
#probe_with_touch_mode: true
#stow_on_each_sample: false
#sample_retract_dist:20

#[neopixel board_rgb]
#pin: 
#chain_count: 1
#color_order: GRB
#initial_RED: 0.3
#initial_GREEN: 0.3
#initial_BLUE: 0.3

#[bed_mesh]
#speed: 120
#mesh_min: 10, 10
#mesh_max: 200, 194
#probe_count: 4,4
#algorithm: bicubic

#[safe_z_home]
#home_xy_position: 109, 102
#speed: 75
#z_hop: 10
#z_hop_speed: 5

[z_tilt]
horizontal_move_z: 10
retries: 5
retry_tolerance: 0.02
speed: 150
z_positions: 0, 122
            195, 122
points: 7, 76
        220, 76

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 33.730
#*# pid_ki = 16.062
#*# pid_kd = 17.709
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 67.911
#*# pid_ki = 1.115
#*# pid_kd = 1033.946
#*#
#*# [probe_eddy_current btt_eddy]
#*# reg_drive_current = 15
#*# calibrate =
#*# 	0.050000:3278416.921,0.090000:3276819.935,0.130000:3275264.151,
#*# 	0.170000:3273685.480,0.210000:3272231.465,0.250000:3270758.525,
#*# 	0.290000:3269354.081,0.330000:3267881.535,0.370000:3266549.583,
#*# 	0.410000:3265177.943,0.450000:3263863.678,0.490000:3262524.762,
#*# 	0.530000:3261270.765,0.570000:3259996.458,0.610000:3258843.947,
#*# 	0.650000:3257600.280,0.690000:3256466.392,0.730000:3255241.614,
#*# 	0.770000:3254158.804,0.810000:3253007.267,0.850000:3251964.042,
#*# 	0.890000:3250862.040,0.930000:3249839.924,0.970000:3248774.123,
#*# 	1.010000:3247806.891,1.050000:3246812.973,1.090000:3245858.395,
#*# 	1.130000:3244876.828,1.170000:3243983.574,1.210000:3243041.756,
#*# 	1.250000:3242152.022,1.290000:3241276.002,1.330000:3240419.934,
#*# 	1.370000:3239596.197,1.410000:3238815.934,1.450000:3237970.752,
#*# 	1.490000:3237183.912,1.530000:3236390.562,1.570000:3235656.198,
#*# 	1.610000:3234855.519,1.650000:3234161.679,1.690000:3233431.867,
#*# 	1.730000:3232737.342,1.770000:3232008.692,1.810000:3231364.439,
#*# 	1.850000:3230700.531,1.890000:3230066.799,1.930000:3229407.721,
#*# 	1.970000:3228782.991,2.010000:3228133.988,2.050000:3227558.997,
#*# 	2.090000:3226952.132,2.130000:3226404.560,2.170000:3225825.684,
#*# 	2.210000:3225253.308,2.250000:3224702.786,2.290000:3224194.644,
#*# 	2.330000:3223656.379,2.370000:3223132.056,2.410000:3222630.903,
#*# 	2.450000:3222169.513,2.490000:3221636.886,2.530000:3221188.472,
#*# 	2.570000:3220694.250,2.610000:3220262.192,2.650000:3219791.833,
#*# 	2.690000:3219333.018,2.730000:3218902.988,2.770000:3218490.726,
#*# 	2.810000:3218049.869,2.850000:3217674.737,2.890000:3217262.973,
#*# 	2.930000:3216870.930,2.970000:3216479.228,3.010000:3216113.308,
#*# 	3.050000:3215731.908,3.090000:3215355.531,3.130000:3215011.293,
#*# 	3.170000:3214658.806,3.210000:3214301.534,3.250000:3213967.187,
#*# 	3.290000:3213648.842,3.330000:3213316.691,3.370000:3212990.444,
#*# 	3.410000:3212695.634,3.450000:3212377.284,3.490000:3212077.796,
#*# 	3.530000:3211774.651,3.570000:3211486.354,3.610000:3211191.024,
#*# 	3.650000:3210935.295,3.690000:3210631.658,3.730000:3210370.229,
#*# 	3.770000:3210075.548,3.810000:3209846.132,3.850000:3209557.979,
#*# 	3.890000:3209324.449,3.930000:3209065.844,3.970000:3208817.536,
#*# 	4.010000:3208559.596,4.050000:3208316.937
#*#
#*# [temperature_probe btt_eddy]
#*# calibration_temp = 38.654049
#*# drift_calibration =
#*# 	3362024.918955, -3359.968337, 31.633767
#*# 	3320894.353215, -2404.336019, 22.399250
#*# 	3286581.220608, -1571.833946, 14.445337
#*# 	3262554.798981, -1037.105429, 9.396475
#*# 	3244917.060457, -667.837709, 5.946990
#*# 	3230816.226602, -363.396072, 3.031935
#*# 	3219290.327179, -107.562489, 0.602542
#*# 	3210665.065236, 75.182730, -1.141124
#*# 	3204727.647823, 179.789826, -2.113889
#*# drift_calibration_min_temp = 38.448888421582495
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.029324, -0.012617, -0.028525, -0.021858, -0.008080, 0.003067, 0.008694, 0.007313, 0.001140, 0.004695, 0.001296, -0.007390, -0.001179, -0.007496, -0.015848, -0.024254, -0.042024, -0.048379, -0.051163, -0.069213, -0.085878, -0.100492, -0.127677, -0.152912, -0.263366
#*# 	  -0.013296, -0.019428, -0.031009, -0.024490, -0.007697, 0.005328, 0.012830, 0.018848, 0.012231, 0.015291, 0.009274, 0.013611, 0.019734, 0.012859, -0.004717, -0.011714, -0.008063, -0.013493, -0.027756, -0.036103, -0.047686, -0.078685, -0.085451, -0.113809, -0.222961
#*# 	  -0.005728, -0.003064, -0.013296, -0.007889, 0.016292, 0.034391, 0.031961, 0.035452, 0.042940, 0.033192, 0.028961, 0.028661, 0.034317, 0.029743, 0.022197, 0.009160, 0.005166, 0.004175, -0.003911, -0.009250, -0.034545, -0.049198, -0.073208, -0.096400, -0.191051
#*# 	  0.001886, -0.002168, -0.001868, 0.008402, 0.025295, 0.034315, 0.045596, 0.047749, 0.039650, 0.034722, 0.035540, 0.040019, 0.038070, 0.032016, 0.029704, 0.026641, 0.024811, 0.020425, 0.013204, 0.015980, -0.001513, -0.021693, -0.030844, -0.052036, -0.162681
#*# 	  0.006751, 0.021573, 0.008140, 0.018907, 0.044296, 0.060817, 0.057228, 0.056763, 0.058304, 0.053612, 0.052477, 0.047761, 0.054331, 0.060900, 0.058124, 0.043657, 0.037088, 0.034108, 0.035138, 0.031858, 0.020555, 0.001381, -0.018489, -0.031327, -0.122804
#*# 	  0.021403, 0.024467, 0.028915, 0.041212, 0.051430, 0.064264, 0.076770, 0.070223, 0.062297, 0.073007, 0.069589, 0.068149, 0.072860, 0.065276, 0.068043, 0.065995, 0.059735, 0.060657, 0.065072, 0.057270, 0.047023, 0.026253, 0.019730, 0.003225, -0.100445
#*# 	  0.031308, 0.051516, 0.039761, 0.053623, 0.072036, 0.085660, 0.085174, 0.086241, 0.093397, 0.082349, 0.078752, 0.079591, 0.084752, 0.094774, 0.091272, 0.082415, 0.082609, 0.086215, 0.086409, 0.075993, 0.065192, 0.048046, 0.033053, 0.011332, -0.068293
#*# 	  0.053292, 0.058527, 0.055855, 0.078255, 0.089161, 0.098993, 0.105995, 0.108037, 0.105701, 0.097813, 0.096790, 0.104632, 0.107451, 0.114000, 0.109596, 0.108038, 0.114153, 0.108656, 0.102717, 0.109043, 0.094931, 0.084025, 0.069244, 0.048498, -0.050005
#*# 	  0.056370, 0.080009, 0.073280, 0.088866, 0.106295, 0.120899, 0.131028, 0.128543, 0.128395, 0.122115, 0.115430, 0.125963, 0.131737, 0.142167, 0.135487, 0.132296, 0.130878, 0.128752, 0.124299, 0.119740, 0.113257, 0.101380, 0.082682, 0.065560, -0.011887
#*# 	  0.067821, 0.075957, 0.080823, 0.102706, 0.108642, 0.121507, 0.137898, 0.138203, 0.131018, 0.121404, 0.129400, 0.134966, 0.141845, 0.151525, 0.148018, 0.149544, 0.151439, 0.147216, 0.141649, 0.154045, 0.139116, 0.117858, 0.106884, 0.088437, 0.016586
#*# 	  0.068540, 0.086323, 0.086273, 0.109921, 0.127399, 0.141298, 0.147777, 0.143272, 0.149043, 0.146158, 0.144436, 0.148688, 0.161348, 0.171205, 0.170432, 0.173524, 0.164170, 0.164170, 0.171028, 0.165039, 0.156152, 0.139705, 0.126751, 0.110569, 0.039652
#*# 	  0.077694, 0.094264, 0.100009, 0.113398, 0.135926, 0.148887, 0.157481, 0.164731, 0.156128, 0.158253, 0.162361, 0.169079, 0.176887, 0.182588, 0.184715, 0.185390, 0.183120, 0.187614, 0.183845, 0.187904, 0.181429, 0.165385, 0.148057, 0.136971, 0.067294
#*# 	  0.080032, 0.097558, 0.101356, 0.123763, 0.139054, 0.160566, 0.167237, 0.163217, 0.175397, 0.171143, 0.168824, 0.174719, 0.182066, 0.188639, 0.198383, 0.195546, 0.193553, 0.197737, 0.197736, 0.199263, 0.186445, 0.177985, 0.161793, 0.150365, 0.088954
#*# 	  0.088991, 0.099024, 0.104870, 0.126164, 0.151031, 0.161187, 0.174729, 0.179565, 0.178500, 0.183530, 0.182957, 0.184408, 0.198861, 0.201652, 0.202150, 0.206834, 0.204643, 0.214856, 0.212714, 0.215505, 0.208927, 0.194876, 0.178023, 0.167400, 0.099376
#*# 	  0.086071, 0.104783, 0.109022, 0.144320, 0.157386, 0.171414, 0.182153, 0.181234, 0.189797, 0.190765, 0.189057, 0.196576, 0.205846, 0.204848, 0.214118, 0.212722, 0.214714, 0.222092, 0.224781, 0.222688, 0.222493, 0.209631, 0.203046, 0.183535, 0.130483
#*# 	  0.086482, 0.105390, 0.112774, 0.136239, 0.153882, 0.168490, 0.181261, 0.190503, 0.188278, 0.184990, 0.191640, 0.203151, 0.207236, 0.211223, 0.215211, 0.218201, 0.211921, 0.213614, 0.227371, 0.230759, 0.238873, 0.214905, 0.206535, 0.195869, 0.134941
#*# 	  0.084446, 0.109008, 0.107110, 0.147200, 0.153558, 0.167488, 0.183938, 0.176729, 0.189357, 0.193997, 0.195392, 0.206858, 0.210944, 0.211144, 0.220616, 0.225205, 0.226400, 0.226401, 0.234228, 0.240047, 0.241680, 0.237981, 0.222859, 0.211988, 0.161233
#*# 	  0.085351, 0.110217, 0.121757, 0.136563, 0.157057, 0.167029, 0.184359, 0.189199, 0.195834, 0.196233, 0.198466, 0.202902, 0.213376, 0.219158, 0.228036, 0.224843, 0.225092, 0.230329, 0.237884, 0.243791, 0.251286, 0.243613, 0.231189, 0.220365, 0.171732
#*# 	  0.087596, 0.107472, 0.115048, 0.151824, 0.156473, 0.172353, 0.184168, 0.183538, 0.199531, 0.205717, 0.205316, 0.216729, 0.220322, 0.220420, 0.230799, 0.232917, 0.233889, 0.242448, 0.241390, 0.255068, 0.248537, 0.247740, 0.244301, 0.242062, 0.189577
#*# 	  0.090286, 0.106873, 0.121833, 0.141112, 0.148418, 0.173224, 0.184267, 0.191154, 0.197940, 0.206521, 0.204027, 0.214210, 0.222896, 0.226288, 0.233697, 0.235815, 0.233962, 0.238110, 0.249320, 0.250181, 0.261036, 0.257683, 0.240649, 0.243080, 0.200667
#*# 	  0.097358, 0.113870, 0.112860, 0.154011, 0.159919, 0.181230, 0.186269, 0.190240, 0.201404, 0.211085, 0.214777, 0.226659, 0.226757, 0.234510, 0.243632, 0.242925, 0.251488, 0.249194, 0.254579, 0.263320, 0.264290, 0.266496, 0.264378, 0.261906, 0.216186
#*# 	  0.093307, 0.108543, 0.117085, 0.135974, 0.152066, 0.173135, 0.187388, 0.199772, 0.208265, 0.206866, 0.209663, 0.212209, 0.234991, 0.237998, 0.243296, 0.244975, 0.241796, 0.241808, 0.252583, 0.255675, 0.266799, 0.272715, 0.256819, 0.260529, 0.221228
#*# 	  0.086231, 0.097996, 0.105709, 0.147404, 0.152020, 0.166368, 0.189150, 0.184013, 0.198791, 0.207782, 0.210980, 0.221870, 0.226267, 0.225265, 0.242780, 0.238629, 0.242199, 0.251385, 0.250411, 0.260393, 0.270197, 0.267020, 0.273874, 0.276097, 0.241403
#*# 	  0.061117, 0.080386, 0.092400, 0.106273, 0.126206, 0.144186, 0.166792, 0.184150, 0.185023, 0.192042, 0.198688, 0.200536, 0.205732, 0.225520, 0.229875, 0.231663, 0.229376, 0.238510, 0.249687, 0.256580, 0.272849, 0.278132, 0.267362, 0.273356, 0.249915
#*# 	  0.049728, 0.072223, 0.076866, 0.121033, 0.128151, 0.146936, 0.168750, 0.169816, 0.184079, 0.196671, 0.197871, 0.210167, 0.215865, 0.221215, 0.233464, 0.233244, 0.238460, 0.248009, 0.247477, 0.262481, 0.278262, 0.290084, 0.290361, 0.298245, 0.264958
#*# x_count = 25
#*# y_count = 25
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 10.0
#*# max_x = 220.0
#*# min_y = 30.0
#*# max_y = 180.95999999999998
