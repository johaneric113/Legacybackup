
[include mainsail.cfg]
[include macros.cfg]
[exclude_object]
[include KAMP_Settings.cfg]
[include Adaptive_Meshing.cfg]
#[include timelapse.cfg]
[include stealthburner_leds.cfg]
[include Demon_BTT_Eddy_Offset.cfg]

[temperature_sensor mcu_temp]
sensor_type: temperature_mcu
sensor_mcu: mcu
min_temp: 0
max_temp: 100

[temperature_sensor raspberry_pi_4b]
sensor_type: temperature_host
min_temp: 10
max_temp: 100

[mcu EBBCan]
serial: /dev/ttyACM2

[mcu]
serial: /dev/ttyACM1

[adxl345]
cs_pin: EBBCan: PB12
spi_software_sclk_pin: EBBCan: PB10
spi_software_mosi_pin: EBBCan: PB11
spi_software_miso_pin: EBBCan: PB2
axes_map: x,y,z

[resonance_tester]
accel_chip: adxl345
probe_points:
    109,102,20  # an example for a 350mm printer

[stepper_x]
step_pin: gpio11
dir_pin: !gpio10
enable_pin: !gpio12
microsteps: 16
rotation_distance: 40
endstop_pin: ^gpio4
endstop_pin: tmc2209_stepper_x:virtual_endstop
homing_retract_dist: 0
position_endstop: 0
position_max: 230
homing_speed: 20

[tmc2209 stepper_x]
uart_pin: gpio9
tx_pin: gpio8
uart_address: 0
run_current: 1.2
hold_current: 0.6
stealthchop_threshold: 999999
diag_pin: ^gpio4
driver_SGTHRS: 45

[stepper_y]
step_pin: gpio6
dir_pin: gpio5
enable_pin: !gpio7
microsteps: 16
rotation_distance: 40
endstop_pin: ^gpio3
endstop_pin: tmc2209_stepper_y:virtual_endstop
homing_retract_dist: 0
position_endstop: 0
position_max: 230
homing_speed: 20

[tmc2209 stepper_y]
uart_pin: gpio9
tx_pin: gpio8
uart_address: 2
run_current: 1.2
hold_current: 0.6
stealthchop_threshold: 999999
diag_pin: ^gpio3
driver_SGTHRS:47

[stepper_z]
step_pin: gpio19
dir_pin: !gpio28
enable_pin: !gpio2
microsteps: 16
rotation_distance: 8
endstop_pin: ^gpio25
#position_endstop: 0
endstop_pin: probe:z_virtual_endstop
position_min: -10
position_max: 300
homing_speed: 20

[tmc2209 stepper_z]
uart_pin: gpio9
tx_pin: gpio8
uart_address: 1
run_current: 0.650
hold_current: 0.500
#stealthchop_threshold: 999999

[stepper_z1]
step_pin: gpio14
dir_pin: !gpio13
enable_pin: !gpio15
microsteps: 16
rotation_distance: 8

[extruder]
step_pin: EBBCan: PD0
dir_pin: !EBBCan: PD1
enable_pin: !EBBCan: PD2
microsteps: 16
rotation_distance: 4.48448
nozzle_diameter: 0.400
filament_diameter: 1.750
heater_pin: EBBCan: PB13
sensor_type: EPCOS 100K B57560G104F
sensor_pin: EBBCan: PA3
#control: pid
#pid_Kp: 21.527
#pid_Ki: 1.063
#pid_Kd: 108.982
min_temp: 0
max_temp: 280
pressure_advance: 0.02

[tmc2209 extruder]
uart_pin: EBBCan: PA15
run_current: 0.650
stealthchop_threshold: 999999

[filament_switch_sensor runout_sensor]
switch_pin: ^gpio16
pause_on_runout: True

# [filament_motion_sensor smart_sensor]
# switch_pin: ^gpio16
# detection_length: 2.5

[heater_bed]
heater_pin: gpio21
sensor_type: EPCOS 100K B57560G104F
sensor_pin: gpio26
#control: pid
#pid_Kp: 54.027
#pid_Ki: 0.770
#pid_Kd: 948.182
min_temp: 0
max_temp: 130

[fan]
pin: EBBCan: PA1

[heater_fan hotend_fan]
pin: EBBCan: PA0
heater: extruder
heater_temp: 50.0

[printer]
kinematics: corexy
max_velocity: 500
max_accel: 6000
max_z_velocity: 25
max_z_accel: 30

[input_shaper]
shaper_freq_x: 68.8
shaper_type_x: mzv
shaper_freq_y: 53.8
shaper_type_y: zv

#[bltouch]
#sensor_pin: ^EBBCan:PB8
#control_pin: EBBCan:PB9
#x_offset: 32.95
#y_offset: -10.71
#z_offset: 0
#probe_with_touch_mode: true
#stow_on_each_sample: false
#sample_retract_dist:20

#[neopixel board_rgb]
#pin: 
#chain_count: 1
#color_order: GRB
#initial_RED: 0.3
#initial_GREEN: 0.3
#initial_BLUE: 0.3

#[bed_mesh]
#speed: 120
#mesh_min: 10, 10
#mesh_max: 200, 194
#probe_count: 4,4
#algorithm: bicubic

#[safe_z_home]
#home_xy_position: 109, 102
#speed: 75
#z_hop: 10
#z_hop_speed: 5

[z_tilt]
horizontal_move_z: 10
retries: 5
retry_tolerance: 0.02
speed: 150
z_positions: 0, 122
            195, 122
points: 7, 76
        220, 76

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 33.730
#*# pid_ki = 16.062
#*# pid_kd = 17.709
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 67.911
#*# pid_ki = 1.115
#*# pid_kd = 1033.946
#*#
#*# [probe_eddy_current btt_eddy]
#*# reg_drive_current = 15
#*# calibrate =
#*# 	0.050000:3278416.921,0.090000:3276819.935,0.130000:3275264.151,
#*# 	0.170000:3273685.480,0.210000:3272231.465,0.250000:3270758.525,
#*# 	0.290000:3269354.081,0.330000:3267881.535,0.370000:3266549.583,
#*# 	0.410000:3265177.943,0.450000:3263863.678,0.490000:3262524.762,
#*# 	0.530000:3261270.765,0.570000:3259996.458,0.610000:3258843.947,
#*# 	0.650000:3257600.280,0.690000:3256466.392,0.730000:3255241.614,
#*# 	0.770000:3254158.804,0.810000:3253007.267,0.850000:3251964.042,
#*# 	0.890000:3250862.040,0.930000:3249839.924,0.970000:3248774.123,
#*# 	1.010000:3247806.891,1.050000:3246812.973,1.090000:3245858.395,
#*# 	1.130000:3244876.828,1.170000:3243983.574,1.210000:3243041.756,
#*# 	1.250000:3242152.022,1.290000:3241276.002,1.330000:3240419.934,
#*# 	1.370000:3239596.197,1.410000:3238815.934,1.450000:3237970.752,
#*# 	1.490000:3237183.912,1.530000:3236390.562,1.570000:3235656.198,
#*# 	1.610000:3234855.519,1.650000:3234161.679,1.690000:3233431.867,
#*# 	1.730000:3232737.342,1.770000:3232008.692,1.810000:3231364.439,
#*# 	1.850000:3230700.531,1.890000:3230066.799,1.930000:3229407.721,
#*# 	1.970000:3228782.991,2.010000:3228133.988,2.050000:3227558.997,
#*# 	2.090000:3226952.132,2.130000:3226404.560,2.170000:3225825.684,
#*# 	2.210000:3225253.308,2.250000:3224702.786,2.290000:3224194.644,
#*# 	2.330000:3223656.379,2.370000:3223132.056,2.410000:3222630.903,
#*# 	2.450000:3222169.513,2.490000:3221636.886,2.530000:3221188.472,
#*# 	2.570000:3220694.250,2.610000:3220262.192,2.650000:3219791.833,
#*# 	2.690000:3219333.018,2.730000:3218902.988,2.770000:3218490.726,
#*# 	2.810000:3218049.869,2.850000:3217674.737,2.890000:3217262.973,
#*# 	2.930000:3216870.930,2.970000:3216479.228,3.010000:3216113.308,
#*# 	3.050000:3215731.908,3.090000:3215355.531,3.130000:3215011.293,
#*# 	3.170000:3214658.806,3.210000:3214301.534,3.250000:3213967.187,
#*# 	3.290000:3213648.842,3.330000:3213316.691,3.370000:3212990.444,
#*# 	3.410000:3212695.634,3.450000:3212377.284,3.490000:3212077.796,
#*# 	3.530000:3211774.651,3.570000:3211486.354,3.610000:3211191.024,
#*# 	3.650000:3210935.295,3.690000:3210631.658,3.730000:3210370.229,
#*# 	3.770000:3210075.548,3.810000:3209846.132,3.850000:3209557.979,
#*# 	3.890000:3209324.449,3.930000:3209065.844,3.970000:3208817.536,
#*# 	4.010000:3208559.596,4.050000:3208316.937
#*#
#*# [temperature_probe btt_eddy]
#*# calibration_temp = 38.654049
#*# drift_calibration =
#*# 	3362024.918955, -3359.968337, 31.633767
#*# 	3320894.353215, -2404.336019, 22.399250
#*# 	3286581.220608, -1571.833946, 14.445337
#*# 	3262554.798981, -1037.105429, 9.396475
#*# 	3244917.060457, -667.837709, 5.946990
#*# 	3230816.226602, -363.396072, 3.031935
#*# 	3219290.327179, -107.562489, 0.602542
#*# 	3210665.065236, 75.182730, -1.141124
#*# 	3204727.647823, 179.789826, -2.113889
#*# drift_calibration_min_temp = 38.448888421582495
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  0.091479, 0.091213, 0.090082, 0.099516, 0.111153, 0.120708, 0.126774, 0.123987, 0.121658, 0.116198, 0.112674, 0.108033, 0.113136, 0.104329, 0.094567, 0.090536, 0.075525, 0.064250, 0.057682, 0.041751, 0.026803, 0.006693, -0.016797, -0.040924, -0.107110
#*# 	  0.103603, 0.095430, 0.094615, 0.102306, 0.115027, 0.127870, 0.138153, 0.138948, 0.129785, 0.126092, 0.125604, 0.127675, 0.126837, 0.116794, 0.112915, 0.105901, 0.098075, 0.089645, 0.080937, 0.072996, 0.053414, 0.031311, 0.016054, -0.012580, -0.074369
#*# 	  0.116060, 0.106844, 0.107768, 0.123534, 0.137323, 0.146425, 0.154576, 0.152329, 0.147542, 0.148001, 0.148760, 0.145081, 0.142068, 0.137410, 0.135122, 0.130169, 0.121148, 0.108524, 0.103588, 0.094175, 0.083535, 0.060273, 0.035253, 0.015056, -0.037109
#*# 	  0.119084, 0.114825, 0.124635, 0.134885, 0.147024, 0.159754, 0.163513, 0.171091, 0.161885, 0.161133, 0.161570, 0.161067, 0.160255, 0.156809, 0.148763, 0.144841, 0.135324, 0.129513, 0.126467, 0.126478, 0.113667, 0.086533, 0.074139, 0.047554, -0.003535
#*# 	  0.134403, 0.137844, 0.141913, 0.153650, 0.169901, 0.183522, 0.188452, 0.184268, 0.173253, 0.179938, 0.177559, 0.172982, 0.179209, 0.174683, 0.174873, 0.162480, 0.159159, 0.154398, 0.147615, 0.145020, 0.137279, 0.114024, 0.095777, 0.077568, 0.027227
#*# 	  0.140384, 0.143578, 0.147707, 0.160188, 0.179534, 0.183686, 0.194179, 0.194819, 0.185372, 0.182632, 0.182869, 0.183331, 0.188813, 0.188969, 0.185363, 0.181135, 0.169456, 0.173526, 0.169629, 0.167688, 0.157795, 0.135945, 0.121912, 0.102748, 0.047743
#*# 	  0.156322, 0.166155, 0.176021, 0.185226, 0.202154, 0.212998, 0.221192, 0.218350, 0.210270, 0.207120, 0.209863, 0.206668, 0.216568, 0.215585, 0.211322, 0.206108, 0.198589, 0.194493, 0.196895, 0.190133, 0.180131, 0.169656, 0.148119, 0.123682, 0.078009
#*# 	  0.179665, 0.181922, 0.189811, 0.198983, 0.217390, 0.232699, 0.235837, 0.232475, 0.227959, 0.219120, 0.220014, 0.223431, 0.231250, 0.237086, 0.232009, 0.230159, 0.221320, 0.219824, 0.217696, 0.211822, 0.205178, 0.186455, 0.166391, 0.150887, 0.099540
#*# 	  0.182419, 0.194471, 0.207003, 0.219071, 0.234643, 0.248180, 0.249479, 0.247763, 0.245322, 0.237920, 0.239219, 0.244122, 0.248458, 0.258671, 0.252847, 0.246057, 0.243490, 0.237373, 0.236688, 0.232693, 0.224678, 0.205726, 0.186063, 0.164529, 0.126478
#*# 	  0.188537, 0.198598, 0.206910, 0.222203, 0.237811, 0.250988, 0.257064, 0.256751, 0.251008, 0.244890, 0.248156, 0.255272, 0.262409, 0.265818, 0.264976, 0.262679, 0.260979, 0.254574, 0.256058, 0.250575, 0.241331, 0.226060, 0.205535, 0.192699, 0.143007
#*# 	  0.195176, 0.214214, 0.220164, 0.236862, 0.250611, 0.262703, 0.273496, 0.269493, 0.265441, 0.257427, 0.268795, 0.268196, 0.272741, 0.278068, 0.283394, 0.281509, 0.274611, 0.268614, 0.274252, 0.269415, 0.255951, 0.239920, 0.227308, 0.210465, 0.173880
#*# 	  0.197793, 0.216292, 0.228440, 0.240822, 0.256696, 0.271129, 0.278821, 0.283087, 0.277985, 0.271715, 0.277751, 0.279427, 0.286729, 0.290561, 0.297438, 0.293247, 0.284687, 0.287244, 0.287483, 0.283951, 0.275632, 0.261040, 0.246834, 0.233758, 0.181209
#*# 	  0.193905, 0.224604, 0.228104, 0.247127, 0.263729, 0.278821, 0.284327, 0.288653, 0.285241, 0.287276, 0.287774, 0.291484, 0.295256, 0.302797, 0.303886, 0.302629, 0.305861, 0.300420, 0.305208, 0.303412, 0.293057, 0.276380, 0.264583, 0.248457, 0.212159
#*# 	  0.205537, 0.219152, 0.234997, 0.247508, 0.264965, 0.281374, 0.294004, 0.296294, 0.295995, 0.288947, 0.292105, 0.298900, 0.306770, 0.314281, 0.310951, 0.309593, 0.312317, 0.310944, 0.313181, 0.311230, 0.303543, 0.292919, 0.272240, 0.261506, 0.195059
#*# 	  0.201197, 0.233025, 0.239071, 0.255215, 0.274559, 0.288864, 0.304966, 0.304561, 0.300790, 0.302826, 0.303109, 0.307146, 0.312181, 0.318659, 0.316378, 0.317688, 0.319155, 0.318770, 0.326039, 0.322109, 0.315614, 0.305051, 0.290866, 0.277577, 0.248566
#*# 	  0.208556, 0.225224, 0.242065, 0.253831, 0.270761, 0.292643, 0.298943, 0.307457, 0.304267, 0.300795, 0.303489, 0.311747, 0.315564, 0.318127, 0.320121, 0.320350, 0.322913, 0.321605, 0.326160, 0.328825, 0.324667, 0.316579, 0.301490, 0.292870, 0.247169
#*# 	  0.195653, 0.231578, 0.239193, 0.260443, 0.278336, 0.287016, 0.297026, 0.302592, 0.303368, 0.299245, 0.307085, 0.316723, 0.317149, 0.321821, 0.323017, 0.320170, 0.324152, 0.326885, 0.328808, 0.333104, 0.332594, 0.325870, 0.310128, 0.300852, 0.270008
#*# 	  0.213758, 0.231844, 0.242666, 0.258009, 0.277070, 0.288622, 0.296097, 0.304238, 0.304775, 0.305314, 0.311031, 0.318606, 0.322237, 0.321169, 0.325071, 0.324344, 0.327136, 0.327282, 0.332737, 0.339699, 0.334518, 0.337322, 0.318854, 0.314595, 0.265159
#*# 	  0.201448, 0.236772, 0.238285, 0.259593, 0.274020, 0.288205, 0.297004, 0.302808, 0.305695, 0.310065, 0.308748, 0.318360, 0.321379, 0.326447, 0.327429, 0.327144, 0.329707, 0.332078, 0.336407, 0.344095, 0.342728, 0.334438, 0.329995, 0.323787, 0.296859
#*# 	  0.212676, 0.231683, 0.240255, 0.260339, 0.273842, 0.283979, 0.295068, 0.299901, 0.305765, 0.309274, 0.315444, 0.322221, 0.324833, 0.332751, 0.332880, 0.328057, 0.334778, 0.337511, 0.340302, 0.346027, 0.342271, 0.345174, 0.333818, 0.334672, 0.287745
#*# 	  0.203724, 0.236950, 0.238619, 0.259542, 0.277437, 0.288092, 0.301679, 0.303534, 0.308553, 0.308252, 0.318174, 0.323034, 0.326737, 0.334372, 0.333914, 0.337033, 0.336992, 0.340737, 0.339044, 0.345084, 0.347645, 0.347462, 0.341112, 0.339346, 0.324708
#*# 	  0.209048, 0.229756, 0.235415, 0.254014, 0.274254, 0.288301, 0.300571, 0.304641, 0.305766, 0.312789, 0.315979, 0.322936, 0.326865, 0.335751, 0.334783, 0.335395, 0.340979, 0.335739, 0.343740, 0.351578, 0.349663, 0.354559, 0.344580, 0.351847, 0.312626
#*# 	  0.172541, 0.208853, 0.210664, 0.236395, 0.254181, 0.275402, 0.285167, 0.292649, 0.301852, 0.297325, 0.307021, 0.313414, 0.318525, 0.326342, 0.325090, 0.329248, 0.328148, 0.332534, 0.337089, 0.345235, 0.350521, 0.354579, 0.353618, 0.358717, 0.346896
#*# 	  0.168500, 0.188721, 0.198916, 0.218907, 0.240943, 0.259311, 0.275321, 0.283340, 0.284897, 0.291645, 0.298314, 0.306544, 0.311054, 0.319482, 0.323681, 0.323539, 0.327327, 0.328374, 0.336718, 0.346955, 0.347976, 0.359241, 0.352139, 0.367479, 0.329522
#*# 	  0.151614, 0.188808, 0.189808, 0.215452, 0.236535, 0.255761, 0.275309, 0.279439, 0.285178, 0.291941, 0.296865, 0.310102, 0.313455, 0.316404, 0.321379, 0.322235, 0.327076, 0.331690, 0.340688, 0.351259, 0.359705, 0.366537, 0.369667, 0.376375, 0.366672
#*# x_count = 25
#*# y_count = 25
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 10.0
#*# max_x = 220.0
#*# min_y = 30.0
#*# max_y = 180.95999999999998
