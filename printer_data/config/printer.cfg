
[include mainsail.cfg]
[include macros.cfg]
[exclude_object]
[include KAMP_Settings.cfg]
[include Adaptive_Meshing.cfg]
#[include timelapse.cfg]
[include stealthburner_leds.cfg]
[include Demon_BTT_Eddy_Offset.cfg]

[temperature_sensor mcu_temp]
sensor_type: temperature_mcu
sensor_mcu: mcu
min_temp: 0
max_temp: 100

[temperature_sensor raspberry_pi_4b]
sensor_type: temperature_host
min_temp: 10
max_temp: 100

[mcu EBBCan]
serial: /dev/ttyACM2

[mcu]
serial: /dev/ttyACM1

[adxl345]
cs_pin: EBBCan: PB12
spi_software_sclk_pin: EBBCan: PB10
spi_software_mosi_pin: EBBCan: PB11
spi_software_miso_pin: EBBCan: PB2
axes_map: x,y,z

[resonance_tester]
accel_chip: adxl345
probe_points:
    109,102,20  # an example for a 350mm printer

[stepper_x]
step_pin: gpio11
dir_pin: !gpio10
enable_pin: !gpio12
microsteps: 16
rotation_distance: 40
endstop_pin: ^gpio4
endstop_pin: tmc2209_stepper_x:virtual_endstop
homing_retract_dist: 0
position_endstop: 0
position_max: 230
homing_speed: 20

[tmc2209 stepper_x]
uart_pin: gpio9
tx_pin: gpio8
uart_address: 0
run_current: 1.2
hold_current: 0.6
stealthchop_threshold: 999999
diag_pin: ^gpio4
driver_SGTHRS: 45

[stepper_y]
step_pin: gpio6
dir_pin: gpio5
enable_pin: !gpio7
microsteps: 16
rotation_distance: 40
endstop_pin: ^gpio3
endstop_pin: tmc2209_stepper_y:virtual_endstop
homing_retract_dist: 0
position_endstop: 0
position_max: 230
homing_speed: 20

[tmc2209 stepper_y]
uart_pin: gpio9
tx_pin: gpio8
uart_address: 2
run_current: 1.2
hold_current: 0.6
stealthchop_threshold: 999999
diag_pin: ^gpio3
driver_SGTHRS:47

[stepper_z]
step_pin: gpio19
dir_pin: !gpio28
enable_pin: !gpio2
microsteps: 16
rotation_distance: 8
endstop_pin: ^gpio25
#position_endstop: 0
endstop_pin: probe:z_virtual_endstop
position_min: -10
position_max: 300
homing_speed: 20

[tmc2209 stepper_z]
uart_pin: gpio9
tx_pin: gpio8
uart_address: 1
run_current: 0.650
hold_current: 0.500
#stealthchop_threshold: 999999

[stepper_z1]
step_pin: gpio14
dir_pin: !gpio13
enable_pin: !gpio15
microsteps: 16
rotation_distance: 8

[extruder]
step_pin: EBBCan: PD0
dir_pin: !EBBCan: PD1
enable_pin: !EBBCan: PD2
microsteps: 16
rotation_distance: 4.48448
nozzle_diameter: 0.400
filament_diameter: 1.750
heater_pin: EBBCan: PB13
sensor_type: EPCOS 100K B57560G104F
sensor_pin: EBBCan: PA3
#control: pid
#pid_Kp: 21.527
#pid_Ki: 1.063
#pid_Kd: 108.982
min_temp: 0
max_temp: 280
pressure_advance: 0.02

[tmc2209 extruder]
uart_pin: EBBCan: PA15
run_current: 0.650
stealthchop_threshold: 999999

[filament_switch_sensor runout_sensor]
switch_pin: ^gpio16
pause_on_runout: True

# [filament_motion_sensor smart_sensor]
# switch_pin: ^gpio16
# detection_length: 2.5

[heater_bed]
heater_pin: gpio21
sensor_type: EPCOS 100K B57560G104F
sensor_pin: gpio26
#control: pid
#pid_Kp: 54.027
#pid_Ki: 0.770
#pid_Kd: 948.182
min_temp: 0
max_temp: 130

[fan]
pin: EBBCan: PA1

[heater_fan hotend_fan]
pin: EBBCan: PA0
heater: extruder
heater_temp: 50.0

[printer]
kinematics: corexy
max_velocity: 500
max_accel: 6000
max_z_velocity: 25
max_z_accel: 30

[input_shaper]
shaper_freq_x: 68.8
shaper_type_x: mzv
shaper_freq_y: 53.8
shaper_type_y: zv

#[bltouch]
#sensor_pin: ^EBBCan:PB8
#control_pin: EBBCan:PB9
#x_offset: 32.95
#y_offset: -10.71
#z_offset: 0
#probe_with_touch_mode: true
#stow_on_each_sample: false
#sample_retract_dist:20

#[neopixel board_rgb]
#pin: 
#chain_count: 1
#color_order: GRB
#initial_RED: 0.3
#initial_GREEN: 0.3
#initial_BLUE: 0.3

#[bed_mesh]
#speed: 120
#mesh_min: 10, 10
#mesh_max: 200, 194
#probe_count: 4,4
#algorithm: bicubic

#[safe_z_home]
#home_xy_position: 109, 102
#speed: 75
#z_hop: 10
#z_hop_speed: 5

[z_tilt]
horizontal_move_z: 10
retries: 5
retry_tolerance: 0.02
speed: 150
z_positions: 0, 122
            195, 122
points: 7, 76
        220, 76

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 33.730
#*# pid_ki = 16.062
#*# pid_kd = 17.709
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 67.911
#*# pid_ki = 1.115
#*# pid_kd = 1033.946
#*#
#*# [probe_eddy_current btt_eddy]
#*# reg_drive_current = 15
#*# calibrate =
#*# 	0.050000:3278416.921,0.090000:3276819.935,0.130000:3275264.151,
#*# 	0.170000:3273685.480,0.210000:3272231.465,0.250000:3270758.525,
#*# 	0.290000:3269354.081,0.330000:3267881.535,0.370000:3266549.583,
#*# 	0.410000:3265177.943,0.450000:3263863.678,0.490000:3262524.762,
#*# 	0.530000:3261270.765,0.570000:3259996.458,0.610000:3258843.947,
#*# 	0.650000:3257600.280,0.690000:3256466.392,0.730000:3255241.614,
#*# 	0.770000:3254158.804,0.810000:3253007.267,0.850000:3251964.042,
#*# 	0.890000:3250862.040,0.930000:3249839.924,0.970000:3248774.123,
#*# 	1.010000:3247806.891,1.050000:3246812.973,1.090000:3245858.395,
#*# 	1.130000:3244876.828,1.170000:3243983.574,1.210000:3243041.756,
#*# 	1.250000:3242152.022,1.290000:3241276.002,1.330000:3240419.934,
#*# 	1.370000:3239596.197,1.410000:3238815.934,1.450000:3237970.752,
#*# 	1.490000:3237183.912,1.530000:3236390.562,1.570000:3235656.198,
#*# 	1.610000:3234855.519,1.650000:3234161.679,1.690000:3233431.867,
#*# 	1.730000:3232737.342,1.770000:3232008.692,1.810000:3231364.439,
#*# 	1.850000:3230700.531,1.890000:3230066.799,1.930000:3229407.721,
#*# 	1.970000:3228782.991,2.010000:3228133.988,2.050000:3227558.997,
#*# 	2.090000:3226952.132,2.130000:3226404.560,2.170000:3225825.684,
#*# 	2.210000:3225253.308,2.250000:3224702.786,2.290000:3224194.644,
#*# 	2.330000:3223656.379,2.370000:3223132.056,2.410000:3222630.903,
#*# 	2.450000:3222169.513,2.490000:3221636.886,2.530000:3221188.472,
#*# 	2.570000:3220694.250,2.610000:3220262.192,2.650000:3219791.833,
#*# 	2.690000:3219333.018,2.730000:3218902.988,2.770000:3218490.726,
#*# 	2.810000:3218049.869,2.850000:3217674.737,2.890000:3217262.973,
#*# 	2.930000:3216870.930,2.970000:3216479.228,3.010000:3216113.308,
#*# 	3.050000:3215731.908,3.090000:3215355.531,3.130000:3215011.293,
#*# 	3.170000:3214658.806,3.210000:3214301.534,3.250000:3213967.187,
#*# 	3.290000:3213648.842,3.330000:3213316.691,3.370000:3212990.444,
#*# 	3.410000:3212695.634,3.450000:3212377.284,3.490000:3212077.796,
#*# 	3.530000:3211774.651,3.570000:3211486.354,3.610000:3211191.024,
#*# 	3.650000:3210935.295,3.690000:3210631.658,3.730000:3210370.229,
#*# 	3.770000:3210075.548,3.810000:3209846.132,3.850000:3209557.979,
#*# 	3.890000:3209324.449,3.930000:3209065.844,3.970000:3208817.536,
#*# 	4.010000:3208559.596,4.050000:3208316.937
#*#
#*# [temperature_probe btt_eddy]
#*# calibration_temp = 38.654049
#*# drift_calibration =
#*# 	3362024.918955, -3359.968337, 31.633767
#*# 	3320894.353215, -2404.336019, 22.399250
#*# 	3286581.220608, -1571.833946, 14.445337
#*# 	3262554.798981, -1037.105429, 9.396475
#*# 	3244917.060457, -667.837709, 5.946990
#*# 	3230816.226602, -363.396072, 3.031935
#*# 	3219290.327179, -107.562489, 0.602542
#*# 	3210665.065236, 75.182730, -1.141124
#*# 	3204727.647823, 179.789826, -2.113889
#*# drift_calibration_min_temp = 38.448888421582495
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.015877, -0.016031, -0.024859, -0.018603, -0.010221, -0.004970, 0.004880, 0.002702, 0.002452, -0.004907, -0.010690, -0.016113, -0.013297, -0.017796, -0.032852, -0.046957, -0.054836, -0.068871, -0.073862, -0.092922, -0.113074, -0.137025, -0.158801, -0.184212, -0.251871
#*# 	  -0.002003, -0.018509, -0.017951, -0.009870, -0.000452, 0.009956, 0.017507, 0.014347, 0.013975, 0.011730, 0.002126, -0.000069, -0.001574, -0.002871, -0.014744, -0.020792, -0.027946, -0.042949, -0.055059, -0.065961, -0.080541, -0.105299, -0.127587, -0.162714, -0.212271
#*# 	  0.003425, -0.005368, -0.005912, 0.000179, 0.011676, 0.026583, 0.031967, 0.035289, 0.028091, 0.017717, 0.019679, 0.015837, 0.014878, 0.007489, 0.001307, -0.005614, -0.012783, -0.022068, -0.030240, -0.042472, -0.056995, -0.078781, -0.103670, -0.129086, -0.181292
#*# 	  0.003222, -0.001911, 0.000546, 0.009589, 0.025044, 0.036502, 0.046107, 0.042534, 0.034920, 0.031640, 0.030457, 0.026257, 0.024556, 0.019849, 0.018723, 0.013001, 0.005975, -0.002515, -0.007920, -0.012409, -0.026421, -0.051673, -0.070686, -0.097180, -0.151441
#*# 	  0.011804, 0.016900, 0.019661, 0.030267, 0.042244, 0.059644, 0.064184, 0.056456, 0.050065, 0.050581, 0.045818, 0.040627, 0.043823, 0.044349, 0.040433, 0.028634, 0.023102, 0.016534, 0.017784, 0.011675, -0.001448, -0.019402, -0.041961, -0.057615, -0.117130
#*# 	  0.017193, 0.019074, 0.023004, 0.035373, 0.053458, 0.061938, 0.068856, 0.063894, 0.061059, 0.055813, 0.054457, 0.052638, 0.056059, 0.060461, 0.056317, 0.047411, 0.039512, 0.033669, 0.035463, 0.033277, 0.025149, 0.003025, -0.010724, -0.032021, -0.089620
#*# 	  0.032199, 0.036565, 0.046826, 0.055184, 0.070658, 0.079726, 0.090311, 0.085230, 0.080823, 0.072601, 0.072072, 0.074211, 0.077717, 0.079623, 0.074234, 0.067575, 0.067039, 0.061069, 0.055710, 0.052353, 0.040211, 0.025758, 0.013560, -0.011088, -0.067177
#*# 	  0.053223, 0.057474, 0.058847, 0.074736, 0.084731, 0.099011, 0.106215, 0.101105, 0.095534, 0.082874, 0.090518, 0.091618, 0.100877, 0.100942, 0.099332, 0.090064, 0.090620, 0.084917, 0.079026, 0.077172, 0.069169, 0.051404, 0.035103, 0.011667, -0.037431
#*# 	  0.062958, 0.074057, 0.077960, 0.087613, 0.102860, 0.114786, 0.123405, 0.123030, 0.116509, 0.105458, 0.106512, 0.113946, 0.118843, 0.120983, 0.117182, 0.116536, 0.114480, 0.105846, 0.100399, 0.096681, 0.091179, 0.073711, 0.052281, 0.031522, -0.007149
#*# 	  0.063460, 0.075956, 0.084350, 0.094620, 0.108187, 0.121296, 0.134446, 0.128987, 0.124862, 0.118160, 0.122072, 0.126265, 0.131097, 0.132653, 0.135297, 0.135229, 0.134326, 0.123949, 0.121682, 0.122469, 0.108172, 0.090591, 0.075569, 0.057112, 0.008023
#*# 	  0.072459, 0.088863, 0.095498, 0.109381, 0.122158, 0.138484, 0.148590, 0.147573, 0.141451, 0.139520, 0.138423, 0.141071, 0.146875, 0.154584, 0.157860, 0.153124, 0.145567, 0.145889, 0.144137, 0.139498, 0.128218, 0.107169, 0.094154, 0.080885, 0.042214
#*# 	  0.078701, 0.089329, 0.097983, 0.113563, 0.130357, 0.146461, 0.155963, 0.155701, 0.151263, 0.150567, 0.151802, 0.156448, 0.159650, 0.164758, 0.170047, 0.168980, 0.167810, 0.161963, 0.159932, 0.159706, 0.146213, 0.134736, 0.110862, 0.104343, 0.051338
#*# 	  0.072411, 0.097270, 0.106143, 0.120630, 0.137079, 0.153331, 0.163609, 0.165640, 0.162131, 0.161516, 0.160964, 0.165335, 0.169947, 0.176536, 0.179120, 0.179347, 0.176077, 0.171892, 0.175215, 0.176301, 0.163967, 0.149217, 0.126996, 0.114260, 0.076527
#*# 	  0.076996, 0.097200, 0.104456, 0.123310, 0.143385, 0.158653, 0.169102, 0.171874, 0.170949, 0.165777, 0.165000, 0.175714, 0.180705, 0.184280, 0.187096, 0.186850, 0.190791, 0.190612, 0.185868, 0.186377, 0.174048, 0.161737, 0.144583, 0.134440, 0.081488
#*# 	  0.074890, 0.105361, 0.110920, 0.134933, 0.152528, 0.167620, 0.179515, 0.180761, 0.175817, 0.174417, 0.182600, 0.185959, 0.189996, 0.195137, 0.191708, 0.191072, 0.191893, 0.194306, 0.192398, 0.197417, 0.191864, 0.175193, 0.162742, 0.145566, 0.111605
#*# 	  0.081198, 0.096962, 0.114791, 0.133197, 0.149659, 0.165177, 0.175852, 0.180224, 0.179855, 0.173479, 0.177714, 0.186836, 0.191357, 0.195501, 0.196407, 0.197724, 0.199805, 0.201123, 0.200251, 0.207631, 0.195491, 0.186783, 0.170637, 0.158742, 0.114186
#*# 	  0.070700, 0.107636, 0.113906, 0.134243, 0.149618, 0.167669, 0.175993, 0.178826, 0.181015, 0.178363, 0.186406, 0.188469, 0.196226, 0.194750, 0.197501, 0.195342, 0.203822, 0.202585, 0.205131, 0.207416, 0.209020, 0.197578, 0.183523, 0.169942, 0.144561
#*# 	  0.080587, 0.101224, 0.118115, 0.134691, 0.153452, 0.167893, 0.173055, 0.181458, 0.182921, 0.182609, 0.183476, 0.196938, 0.198019, 0.199924, 0.203547, 0.200140, 0.202618, 0.208782, 0.209085, 0.212516, 0.210990, 0.202797, 0.185866, 0.184478, 0.137649
#*# 	  0.075863, 0.109096, 0.115765, 0.137141, 0.151079, 0.161659, 0.175459, 0.181904, 0.184215, 0.179659, 0.187788, 0.197551, 0.199649, 0.210632, 0.209743, 0.201413, 0.205045, 0.209751, 0.215343, 0.216996, 0.217664, 0.211641, 0.200021, 0.189402, 0.167066
#*# 	  0.089829, 0.104813, 0.116601, 0.133348, 0.147504, 0.163631, 0.172466, 0.179189, 0.183033, 0.187274, 0.192547, 0.199080, 0.207650, 0.207908, 0.206190, 0.204854, 0.209609, 0.214417, 0.214001, 0.222111, 0.220805, 0.216418, 0.203398, 0.202174, 0.158674
#*# 	  0.077844, 0.110999, 0.115139, 0.131821, 0.146988, 0.163879, 0.175911, 0.183134, 0.182517, 0.182331, 0.190663, 0.202731, 0.204577, 0.206485, 0.210947, 0.208739, 0.211583, 0.214062, 0.218739, 0.221078, 0.222365, 0.221695, 0.214237, 0.206477, 0.188341
#*# 	  0.087866, 0.104346, 0.118143, 0.128444, 0.152653, 0.170572, 0.178273, 0.183705, 0.189230, 0.186668, 0.192642, 0.201676, 0.205620, 0.211365, 0.213590, 0.216387, 0.217738, 0.219903, 0.221110, 0.225754, 0.223882, 0.228080, 0.214530, 0.222541, 0.177228
#*# 	  0.058559, 0.092085, 0.097787, 0.116302, 0.135327, 0.156448, 0.172998, 0.176022, 0.180124, 0.181857, 0.190253, 0.192911, 0.202457, 0.204364, 0.210792, 0.209477, 0.209286, 0.214441, 0.216436, 0.222767, 0.228908, 0.229130, 0.230698, 0.226355, 0.211608
#*# 	  0.050703, 0.071965, 0.083101, 0.100841, 0.121900, 0.141962, 0.159097, 0.165708, 0.174338, 0.175206, 0.182555, 0.190859, 0.194072, 0.199291, 0.204144, 0.201071, 0.208532, 0.207357, 0.216041, 0.224460, 0.227308, 0.236070, 0.226895, 0.247253, 0.202965
#*# 	  0.026922, 0.071785, 0.075569, 0.094176, 0.116688, 0.140246, 0.160929, 0.162350, 0.170580, 0.174156, 0.183761, 0.191541, 0.198590, 0.203093, 0.207263, 0.202267, 0.207186, 0.216119, 0.223632, 0.227708, 0.237566, 0.241620, 0.242407, 0.244091, 0.236097
#*# x_count = 25
#*# y_count = 25
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 10.0
#*# max_x = 220.0
#*# min_y = 30.0
#*# max_y = 180.95999999999998
