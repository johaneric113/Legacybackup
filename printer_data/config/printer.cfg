
[include mainsail.cfg]
[include macros.cfg]
[exclude_object]
[include KAMP_Settings.cfg]
[include Adaptive_Meshing.cfg]
[include timelapse.cfg]
[include stealthburner_leds.cfg]
[include Demon_BTT_Eddy_Offset.cfg]

[temperature_sensor mcu_temp]
sensor_type: temperature_mcu
sensor_mcu: mcu
min_temp: 0
max_temp: 100

[temperature_sensor raspberry_pi_4b]
sensor_type: temperature_host
min_temp: 10
max_temp: 100

[mcu EBBCan]
serial: /dev/ttyACM2

[mcu]
serial: /dev/ttyACM1

[adxl345]
cs_pin: EBBCan: PB12
spi_software_sclk_pin: EBBCan: PB10
spi_software_mosi_pin: EBBCan: PB11
spi_software_miso_pin: EBBCan: PB2
axes_map: x,y,z

[resonance_tester]
accel_chip: adxl345
probe_points:
    109,102,20  # an example for a 350mm printer

[stepper_x]
step_pin: gpio11
dir_pin: !gpio10
enable_pin: !gpio12
microsteps: 16
rotation_distance: 40
endstop_pin: ^gpio4
endstop_pin: tmc2209_stepper_x:virtual_endstop
homing_retract_dist: 0
position_endstop: 0
position_max: 230
homing_speed: 20

[tmc2209 stepper_x]
uart_pin: gpio9
tx_pin: gpio8
uart_address: 0
run_current: 1.2
hold_current: 0.6
stealthchop_threshold: 999999
diag_pin: ^gpio4
driver_SGTHRS: 45

[stepper_y]
step_pin: gpio6
dir_pin: gpio5
enable_pin: !gpio7
microsteps: 16
rotation_distance: 40
endstop_pin: ^gpio3
endstop_pin: tmc2209_stepper_y:virtual_endstop
homing_retract_dist: 0
position_endstop: 0
position_max: 230
homing_speed: 20

[tmc2209 stepper_y]
uart_pin: gpio9
tx_pin: gpio8
uart_address: 2
run_current: 1.2
hold_current: 0.6
stealthchop_threshold: 999999
diag_pin: ^gpio3
driver_SGTHRS:47

[stepper_z]
step_pin: gpio19
dir_pin: !gpio28
enable_pin: !gpio2
microsteps: 16
rotation_distance: 8
endstop_pin: ^gpio25
#position_endstop: 0
endstop_pin: probe:z_virtual_endstop
position_min: -10
position_max: 300
homing_speed: 20

[tmc2209 stepper_z]
uart_pin: gpio9
tx_pin: gpio8
uart_address: 1
run_current: 0.650
hold_current: 0.500
#stealthchop_threshold: 999999

[stepper_z1]
step_pin: gpio14
dir_pin: !gpio13
enable_pin: !gpio15
microsteps: 16
rotation_distance: 8

[extruder]
step_pin: EBBCan: PD0
dir_pin: !EBBCan: PD1
enable_pin: !EBBCan: PD2
microsteps: 16
rotation_distance: 4.48448
nozzle_diameter: 0.400
filament_diameter: 1.750
heater_pin: EBBCan: PB13
sensor_type: EPCOS 100K B57560G104F
sensor_pin: EBBCan: PA3
#control: pid
#pid_Kp: 21.527
#pid_Ki: 1.063
#pid_Kd: 108.982
min_temp: 0
max_temp: 280
pressure_advance: 0.02

[tmc2209 extruder]
uart_pin: EBBCan: PA15
run_current: 0.650
stealthchop_threshold: 999999

[filament_switch_sensor runout_sensor]
switch_pin: ^gpio16
pause_on_runout: True

# [filament_motion_sensor smart_sensor]
# switch_pin: ^gpio16
# detection_length: 2.5

[heater_bed]
heater_pin: gpio21
sensor_type: EPCOS 100K B57560G104F
sensor_pin: gpio26
#control: pid
#pid_Kp: 54.027
#pid_Ki: 0.770
#pid_Kd: 948.182
min_temp: 0
max_temp: 130

[fan]
pin: EBBCan: PA1

[heater_fan hotend_fan]
pin: EBBCan: PA0
heater: extruder
heater_temp: 50.0

[printer]
kinematics: corexy
max_velocity: 500
max_accel: 6000
max_z_velocity: 25
max_z_accel: 30

[input_shaper]
shaper_freq_x: 68.8
shaper_type_x: mzv
shaper_freq_y: 53.8
shaper_type_y: zv

#[bltouch]
#sensor_pin: ^EBBCan:PB8
#control_pin: EBBCan:PB9
#x_offset: 32.95
#y_offset: -10.71
#z_offset: 0
#probe_with_touch_mode: true
#stow_on_each_sample: false
#sample_retract_dist:20

#[neopixel board_rgb]
#pin: 
#chain_count: 1
#color_order: GRB
#initial_RED: 0.3
#initial_GREEN: 0.3
#initial_BLUE: 0.3

#[bed_mesh]
#speed: 120
#mesh_min: 10, 10
#mesh_max: 200, 194
#probe_count: 4,4
#algorithm: bicubic

#[safe_z_home]
#home_xy_position: 109, 102
#speed: 75
#z_hop: 10
#z_hop_speed: 5

[z_tilt]
horizontal_move_z: 10
retries: 5
retry_tolerance: 0.02
speed: 150
z_positions: 0, 122
            195, 122
points: 7, 76
        220, 76

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 33.730
#*# pid_ki = 16.062
#*# pid_kd = 17.709
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 67.911
#*# pid_ki = 1.115
#*# pid_kd = 1033.946
#*#
#*# [probe_eddy_current btt_eddy]
#*# reg_drive_current = 15
#*# calibrate =
#*# 	0.050000:3278416.921,0.090000:3276819.935,0.130000:3275264.151,
#*# 	0.170000:3273685.480,0.210000:3272231.465,0.250000:3270758.525,
#*# 	0.290000:3269354.081,0.330000:3267881.535,0.370000:3266549.583,
#*# 	0.410000:3265177.943,0.450000:3263863.678,0.490000:3262524.762,
#*# 	0.530000:3261270.765,0.570000:3259996.458,0.610000:3258843.947,
#*# 	0.650000:3257600.280,0.690000:3256466.392,0.730000:3255241.614,
#*# 	0.770000:3254158.804,0.810000:3253007.267,0.850000:3251964.042,
#*# 	0.890000:3250862.040,0.930000:3249839.924,0.970000:3248774.123,
#*# 	1.010000:3247806.891,1.050000:3246812.973,1.090000:3245858.395,
#*# 	1.130000:3244876.828,1.170000:3243983.574,1.210000:3243041.756,
#*# 	1.250000:3242152.022,1.290000:3241276.002,1.330000:3240419.934,
#*# 	1.370000:3239596.197,1.410000:3238815.934,1.450000:3237970.752,
#*# 	1.490000:3237183.912,1.530000:3236390.562,1.570000:3235656.198,
#*# 	1.610000:3234855.519,1.650000:3234161.679,1.690000:3233431.867,
#*# 	1.730000:3232737.342,1.770000:3232008.692,1.810000:3231364.439,
#*# 	1.850000:3230700.531,1.890000:3230066.799,1.930000:3229407.721,
#*# 	1.970000:3228782.991,2.010000:3228133.988,2.050000:3227558.997,
#*# 	2.090000:3226952.132,2.130000:3226404.560,2.170000:3225825.684,
#*# 	2.210000:3225253.308,2.250000:3224702.786,2.290000:3224194.644,
#*# 	2.330000:3223656.379,2.370000:3223132.056,2.410000:3222630.903,
#*# 	2.450000:3222169.513,2.490000:3221636.886,2.530000:3221188.472,
#*# 	2.570000:3220694.250,2.610000:3220262.192,2.650000:3219791.833,
#*# 	2.690000:3219333.018,2.730000:3218902.988,2.770000:3218490.726,
#*# 	2.810000:3218049.869,2.850000:3217674.737,2.890000:3217262.973,
#*# 	2.930000:3216870.930,2.970000:3216479.228,3.010000:3216113.308,
#*# 	3.050000:3215731.908,3.090000:3215355.531,3.130000:3215011.293,
#*# 	3.170000:3214658.806,3.210000:3214301.534,3.250000:3213967.187,
#*# 	3.290000:3213648.842,3.330000:3213316.691,3.370000:3212990.444,
#*# 	3.410000:3212695.634,3.450000:3212377.284,3.490000:3212077.796,
#*# 	3.530000:3211774.651,3.570000:3211486.354,3.610000:3211191.024,
#*# 	3.650000:3210935.295,3.690000:3210631.658,3.730000:3210370.229,
#*# 	3.770000:3210075.548,3.810000:3209846.132,3.850000:3209557.979,
#*# 	3.890000:3209324.449,3.930000:3209065.844,3.970000:3208817.536,
#*# 	4.010000:3208559.596,4.050000:3208316.937
#*#
#*# [temperature_probe btt_eddy]
#*# calibration_temp = 38.654049
#*# drift_calibration =
#*# 	3362024.918955, -3359.968337, 31.633767
#*# 	3320894.353215, -2404.336019, 22.399250
#*# 	3286581.220608, -1571.833946, 14.445337
#*# 	3262554.798981, -1037.105429, 9.396475
#*# 	3244917.060457, -667.837709, 5.946990
#*# 	3230816.226602, -363.396072, 3.031935
#*# 	3219290.327179, -107.562489, 0.602542
#*# 	3210665.065236, 75.182730, -1.141124
#*# 	3204727.647823, 179.789826, -2.113889
#*# drift_calibration_min_temp = 38.448888421582495
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.117972, -0.117015, -0.117320, -0.101678, -0.091285, -0.086146, -0.087533, -0.083542, -0.079772, -0.066868, -0.065681, -0.072352, -0.083290, -0.094174, -0.099019, -0.102860, -0.085761, -0.081528, -0.083480, -0.104633, -0.118688, -0.139102, -0.161461, -0.172901, -0.354602
#*# 	  -0.116076, -0.123001, -0.120347, -0.093778, -0.083742, -0.070280, -0.081084, -0.080278, -0.067523, -0.056633, -0.056684, -0.050125, -0.066671, -0.081132, -0.080823, -0.081057, -0.069443, -0.055702, -0.068015, -0.080598, -0.092351, -0.118774, -0.129540, -0.150734, -0.319514
#*# 	  -0.103353, -0.109360, -0.096743, -0.082852, -0.069572, -0.065464, -0.066120, -0.060417, -0.055338, -0.042668, -0.031047, -0.039041, -0.051541, -0.054032, -0.063416, -0.063211, -0.054727, -0.040832, -0.049053, -0.055227, -0.075056, -0.096847, -0.107749, -0.125466, -0.274875
#*# 	  -0.102769, -0.109553, -0.096818, -0.078050, -0.061841, -0.057137, -0.061183, -0.058618, -0.049511, -0.034811, -0.032431, -0.036639, -0.040955, -0.043509, -0.043528, -0.048122, -0.041331, -0.032897, -0.029204, -0.037142, -0.049831, -0.071680, -0.084363, -0.099856, -0.253573
#*# 	  -0.088947, -0.089885, -0.076715, -0.058324, -0.046915, -0.040950, -0.043274, -0.039096, -0.035335, -0.025928, -0.025064, -0.022588, -0.023439, -0.020173, -0.021293, -0.028737, -0.021866, -0.010137, -0.005440, -0.011032, -0.033524, -0.051766, -0.060354, -0.069121, -0.207148
#*# 	  -0.088955, -0.083926, -0.074757, -0.051262, -0.032839, -0.028877, -0.034662, -0.031396, -0.028424, -0.017566, -0.015637, -0.015358, -0.010802, -0.010984, -0.012898, -0.010712, -0.005134, 0.006393, 0.015037, 0.003554, -0.010004, -0.029287, -0.039227, -0.054878, -0.181245
#*# 	  -0.073817, -0.067484, -0.058344, -0.033518, -0.015997, -0.012676, -0.015153, -0.015180, -0.006934, -0.002866, -0.003783, 0.001601, 0.005692, 0.002428, 0.001989, 0.010049, 0.018530, 0.026572, 0.029486, 0.024061, 0.006090, -0.006215, -0.013715, -0.028916, -0.149768
#*# 	  -0.056101, -0.045885, -0.039182, -0.012934, 0.005974, 0.010050, 0.002119, 0.000507, 0.002684, 0.009423, 0.012324, 0.021953, 0.023408, 0.022832, 0.028264, 0.032258, 0.035266, 0.055837, 0.049362, 0.046471, 0.030293, 0.018176, 0.006640, -0.006671, -0.120255
#*# 	  -0.047649, -0.037837, -0.022362, 0.004620, 0.016507, 0.027747, 0.021753, 0.016254, 0.017452, 0.023039, 0.031541, 0.038557, 0.041555, 0.040122, 0.043718, 0.048563, 0.058716, 0.068483, 0.068812, 0.063719, 0.047279, 0.035078, 0.021720, 0.015135, -0.083359
#*# 	  -0.045637, -0.035417, -0.019780, 0.004164, 0.022481, 0.027973, 0.021984, 0.023689, 0.024503, 0.032147, 0.042584, 0.043818, 0.049459, 0.047755, 0.058763, 0.065509, 0.068788, 0.080223, 0.083440, 0.078296, 0.070936, 0.055934, 0.039533, 0.035423, -0.066732
#*# 	  -0.044286, -0.027591, -0.008673, 0.014066, 0.030621, 0.036390, 0.037566, 0.035867, 0.035800, 0.046518, 0.057137, 0.064396, 0.070424, 0.072853, 0.074532, 0.085104, 0.085596, 0.092868, 0.099263, 0.099198, 0.084040, 0.074281, 0.063367, 0.054528, -0.033386
#*# 	  -0.033165, -0.016087, -0.001904, 0.024922, 0.047093, 0.051072, 0.054740, 0.051601, 0.059003, 0.062933, 0.075184, 0.081883, 0.086384, 0.092380, 0.088711, 0.092814, 0.100709, 0.108301, 0.115207, 0.113316, 0.103126, 0.087094, 0.079753, 0.073915, -0.021282
#*# 	  -0.031783, -0.010748, 0.004196, 0.031283, 0.050367, 0.058478, 0.061100, 0.060054, 0.063545, 0.077806, 0.081719, 0.088183, 0.095838, 0.090956, 0.098758, 0.103775, 0.105796, 0.122593, 0.128057, 0.126022, 0.116257, 0.098835, 0.092098, 0.084077, 0.008818
#*# 	  -0.023160, -0.011342, 0.011835, 0.035331, 0.054461, 0.068122, 0.069557, 0.063381, 0.066720, 0.081500, 0.092634, 0.100060, 0.107775, 0.103360, 0.103344, 0.107078, 0.116532, 0.133972, 0.141148, 0.134487, 0.126924, 0.115818, 0.105073, 0.100758, 0.017908
#*# 	  -0.027138, 0.000078, 0.015900, 0.048257, 0.066942, 0.073696, 0.073403, 0.075553, 0.082261, 0.090964, 0.105152, 0.108292, 0.113692, 0.104165, 0.111558, 0.119837, 0.131023, 0.145575, 0.151948, 0.151222, 0.143843, 0.131296, 0.121013, 0.113320, 0.054208
#*# 	  -0.024717, -0.003717, 0.016111, 0.041706, 0.064144, 0.076704, 0.078014, 0.080572, 0.087572, 0.096978, 0.114182, 0.109241, 0.116316, 0.103789, 0.114092, 0.126820, 0.137959, 0.154160, 0.156061, 0.157093, 0.153096, 0.137886, 0.133523, 0.127831, 0.054938
#*# 	  -0.030842, -0.002230, 0.011666, 0.038776, 0.067856, 0.075800, 0.080782, 0.077730, 0.087488, 0.098560, 0.114205, 0.115761, 0.113285, 0.104036, 0.112859, 0.132003, 0.139056, 0.158889, 0.164247, 0.165806, 0.160926, 0.151258, 0.142130, 0.138312, 0.087901
#*# 	  -0.018927, 0.001137, 0.019401, 0.049389, 0.072485, 0.079241, 0.080969, 0.078543, 0.089790, 0.104966, 0.116797, 0.115823, 0.111704, 0.110671, 0.117783, 0.129626, 0.140861, 0.161101, 0.172281, 0.175685, 0.169353, 0.159874, 0.145323, 0.154419, 0.088338
#*# 	  -0.024034, 0.006590, 0.018571, 0.047842, 0.071663, 0.078708, 0.081349, 0.080093, 0.088257, 0.103905, 0.108993, 0.113673, 0.120587, 0.116248, 0.125566, 0.134885, 0.145151, 0.166068, 0.180957, 0.185576, 0.179333, 0.167658, 0.160044, 0.162868, 0.119522
#*# 	  -0.018076, 0.003262, 0.019819, 0.047018, 0.071061, 0.082074, 0.081640, 0.083648, 0.094661, 0.100641, 0.112279, 0.117374, 0.123853, 0.122816, 0.123586, 0.135239, 0.149886, 0.171288, 0.185713, 0.189020, 0.182968, 0.173671, 0.166504, 0.174968, 0.116598
#*# 	  -0.020940, 0.005649, 0.021130, 0.046067, 0.073086, 0.081734, 0.087962, 0.080825, 0.092964, 0.104401, 0.112741, 0.117625, 0.120071, 0.116408, 0.127765, 0.140281, 0.151948, 0.174599, 0.188748, 0.195136, 0.187634, 0.180022, 0.171867, 0.180764, 0.145420
#*# 	  -0.012266, 0.008517, 0.023957, 0.049838, 0.071591, 0.080897, 0.089682, 0.087341, 0.091705, 0.102723, 0.113230, 0.118606, 0.124561, 0.119013, 0.123156, 0.140071, 0.156840, 0.173339, 0.195944, 0.198276, 0.195345, 0.184683, 0.179121, 0.191210, 0.143804
#*# 	  -0.037856, -0.005148, 0.009608, 0.034260, 0.062355, 0.071177, 0.075829, 0.076325, 0.084862, 0.097865, 0.107888, 0.115330, 0.115911, 0.117527, 0.124179, 0.135963, 0.155078, 0.177761, 0.193880, 0.203860, 0.198080, 0.189580, 0.188191, 0.196015, 0.171378
#*# 	  -0.034767, -0.014705, 0.002734, 0.024104, 0.049152, 0.065480, 0.070686, 0.071202, 0.082545, 0.092819, 0.105525, 0.108989, 0.113475, 0.113022, 0.120211, 0.135996, 0.156232, 0.174235, 0.197626, 0.200998, 0.196156, 0.189236, 0.186641, 0.206093, 0.160802
#*# 	  -0.052803, -0.014006, -0.007286, 0.019152, 0.043667, 0.061112, 0.064572, 0.069084, 0.083622, 0.089784, 0.107848, 0.110090, 0.117229, 0.113211, 0.121761, 0.136144, 0.153007, 0.180930, 0.195245, 0.207994, 0.205984, 0.197826, 0.199609, 0.210572, 0.187948
#*# x_count = 25
#*# y_count = 25
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 10.0
#*# max_x = 220.0
#*# min_y = 30.0
#*# max_y = 180.95999999999998
